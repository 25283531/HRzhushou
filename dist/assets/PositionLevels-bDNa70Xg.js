import{s as _}from"./request-B7eEf2UR.js";import{_ as le,r as v,n as te,c as D,o as k,b as l,w as o,d,x as r,t as A,e as V,F as j,h,a as p,E as G,j as H}from"./index-YcB68Cng.js";import"./index-xsH4HHeE.js";function oe(){return _({url:"/position-levels/types",method:"get"})}function ae(s){return _({url:"/position-levels/types",method:"post",data:s})}function ne(s,f){return _({url:`/position-levels/types/${s}`,method:"put",data:f})}function se(s){return _({url:`/position-levels/types/${s}`,method:"delete"})}function ue(s){return _({url:"/position-levels/levels",method:"get",params:s?{type_id:s}:{}})}function de(s){return _({url:"/position-levels/levels",method:"post",data:s})}function ie(s,f){return _({url:`//position-levels/levels/${s}`,method:"put",data:f})}function re(s){return _({url:`/position-levels/levels/${s}`,method:"delete"})}const pe={class:"position-levels"},ve={class:"card-header"},me={class:"card-header"},ce={class:"filter-container"},fe={class:"dialog-footer"},_e={class:"dialog-footer"},ye={__name:"PositionLevels",setup(s){const f=v([]),q=v([]),x=v(null),y=v(!1),U=v(""),u=v({name:"",code:"",description:"",is_active:!0}),T=v(null),b=v(!1),$=v(""),n=v({type_id:null,name:"",code:"",level:1,description:"",is_active:!0}),C=v(null),L=async()=>{try{const a=await oe();a.code===0&&(f.value=a.data)}catch{p.error("获取职级类型列表失败")}},g=async()=>{try{const a=await ue(x.value);a.code===0&&(q.value=a.data)}catch{p.error("获取职级列表失败")}},J=()=>{U.value="新增职级类型",u.value={name:"",code:"",description:"",is_active:!0},T.value=null,y.value=!0},K=a=>{U.value="编辑职级类型",u.value={...a},T.value=a.id,y.value=!0},O=a=>{G.confirm("确定要删除该职级类型吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{(await se(a.id)).code===0&&(p.success("删除成功"),L())}catch{p.error("删除失败")}})},Q=async()=>{try{T.value?(await ne(T.value,u.value)).code===0&&(p.success("更新成功"),y.value=!1,L()):(await ae(u.value)).code===0&&(p.success("创建成功"),y.value=!1,L())}catch{p.error("操作失败")}},R=()=>{$.value="新增职级",n.value={type_id:x.value,name:"",code:"",level:1,description:"",is_active:!0},C.value=null,b.value=!0},W=a=>{$.value="编辑职级",n.value={...a},C.value=a.id,b.value=!0},X=a=>{G.confirm("确定要删除该职级吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{(await re(a.id)).code===0&&(p.success("删除成功"),g())}catch{p.error("删除失败")}})},Y=async()=>{try{C.value?(await ie(C.value,n.value)).code===0&&(p.success("更新成功"),b.value=!1,g()):(await de(n.value)).code===0&&(p.success("创建成功"),b.value=!1,g())}catch{p.error("操作失败")}},Z=()=>{g()};return te(()=>{L(),g()}),(a,e)=>{const m=d("el-button"),i=d("el-table-column"),E=d("el-tag"),P=d("el-table"),z=d("el-card"),F=d("el-option"),I=d("el-select"),w=d("el-input"),c=d("el-form-item"),M=d("el-switch"),N=d("el-form"),S=d("el-dialog"),ee=d("el-input-number");return k(),D("div",pe,[l(z,{class:"box-card"},{header:o(()=>[V("div",ve,[e[16]||(e[16]=V("span",null,"职级类型管理",-1)),l(m,{type:"primary",onClick:J},{default:o(()=>e[15]||(e[15]=[r("新增职级类型")])),_:1})])]),default:o(()=>[l(P,{data:f.value,style:{width:"100%"}},{default:o(()=>[l(i,{prop:"name",label:"名称"}),l(i,{prop:"code",label:"编码"}),l(i,{prop:"description",label:"描述"}),l(i,{prop:"is_active",label:"状态"},{default:o(t=>[l(E,{type:t.row.is_active?"success":"info"},{default:o(()=>[r(A(t.row.is_active?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),l(i,{label:"操作",width:"200"},{default:o(t=>[l(m,{size:"small",onClick:B=>K(t.row)},{default:o(()=>e[17]||(e[17]=[r("编辑")])),_:2},1032,["onClick"]),l(m,{size:"small",type:"danger",onClick:B=>O(t.row)},{default:o(()=>e[18]||(e[18]=[r("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),l(z,{class:"box-card",style:{"margin-top":"20px"}},{header:o(()=>[V("div",me,[e[20]||(e[20]=V("span",null,"职级管理",-1)),l(m,{type:"primary",onClick:R},{default:o(()=>e[19]||(e[19]=[r("新增职级")])),_:1})])]),default:o(()=>[V("div",ce,[l(I,{modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=t=>x.value=t),placeholder:"选择职级类型",clearable:"",onChange:Z},{default:o(()=>[(k(!0),D(j,null,h(f.value,t=>(k(),H(F,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),l(P,{data:q.value,style:{width:"100%","margin-top":"20px"}},{default:o(()=>[l(i,{prop:"type_name",label:"类型"}),l(i,{prop:"name",label:"名称"}),l(i,{prop:"code",label:"编码"}),l(i,{prop:"level",label:"等级"}),l(i,{prop:"description",label:"描述"}),l(i,{prop:"is_active",label:"状态"},{default:o(t=>[l(E,{type:t.row.is_active?"success":"info"},{default:o(()=>[r(A(t.row.is_active?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),l(i,{label:"操作",width:"200"},{default:o(t=>[l(m,{size:"small",onClick:B=>W(t.row)},{default:o(()=>e[21]||(e[21]=[r("编辑")])),_:2},1032,["onClick"]),l(m,{size:"small",type:"danger",onClick:B=>X(t.row)},{default:o(()=>e[22]||(e[22]=[r("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),l(S,{title:U.value,modelValue:y.value,"onUpdate:modelValue":e[6]||(e[6]=t=>y.value=t),width:"50%"},{footer:o(()=>[V("span",fe,[l(m,{onClick:e[5]||(e[5]=t=>y.value=!1)},{default:o(()=>e[23]||(e[23]=[r("取消")])),_:1}),l(m,{type:"primary",onClick:Q},{default:o(()=>e[24]||(e[24]=[r("确定")])),_:1})])]),default:o(()=>[l(N,{model:u.value,"label-width":"120px"},{default:o(()=>[l(c,{label:"名称",required:""},{default:o(()=>[l(w,{modelValue:u.value.name,"onUpdate:modelValue":e[1]||(e[1]=t=>u.value.name=t)},null,8,["modelValue"])]),_:1}),l(c,{label:"编码",required:""},{default:o(()=>[l(w,{modelValue:u.value.code,"onUpdate:modelValue":e[2]||(e[2]=t=>u.value.code=t)},null,8,["modelValue"])]),_:1}),l(c,{label:"描述"},{default:o(()=>[l(w,{modelValue:u.value.description,"onUpdate:modelValue":e[3]||(e[3]=t=>u.value.description=t),type:"textarea"},null,8,["modelValue"])]),_:1}),l(c,{label:"状态"},{default:o(()=>[l(M,{modelValue:u.value.is_active,"onUpdate:modelValue":e[4]||(e[4]=t=>u.value.is_active=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"]),l(S,{title:$.value,modelValue:b.value,"onUpdate:modelValue":e[14]||(e[14]=t=>b.value=t),width:"50%"},{footer:o(()=>[V("span",_e,[l(m,{onClick:e[13]||(e[13]=t=>b.value=!1)},{default:o(()=>e[25]||(e[25]=[r("取消")])),_:1}),l(m,{type:"primary",onClick:Y},{default:o(()=>e[26]||(e[26]=[r("确定")])),_:1})])]),default:o(()=>[l(N,{model:n.value,"label-width":"120px"},{default:o(()=>[l(c,{label:"职级类型",required:""},{default:o(()=>[l(I,{modelValue:n.value.type_id,"onUpdate:modelValue":e[7]||(e[7]=t=>n.value.type_id=t),placeholder:"选择职级类型"},{default:o(()=>[(k(!0),D(j,null,h(f.value,t=>(k(),H(F,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(c,{label:"名称",required:""},{default:o(()=>[l(w,{modelValue:n.value.name,"onUpdate:modelValue":e[8]||(e[8]=t=>n.value.name=t)},null,8,["modelValue"])]),_:1}),l(c,{label:"编码",required:""},{default:o(()=>[l(w,{modelValue:n.value.code,"onUpdate:modelValue":e[9]||(e[9]=t=>n.value.code=t)},null,8,["modelValue"])]),_:1}),l(c,{label:"等级",required:""},{default:o(()=>[l(ee,{modelValue:n.value.level,"onUpdate:modelValue":e[10]||(e[10]=t=>n.value.level=t),min:1},null,8,["modelValue"])]),_:1}),l(c,{label:"描述"},{default:o(()=>[l(w,{modelValue:n.value.description,"onUpdate:modelValue":e[11]||(e[11]=t=>n.value.description=t),type:"textarea"},null,8,["modelValue"])]),_:1}),l(c,{label:"状态"},{default:o(()=>[l(M,{modelValue:n.value.is_active,"onUpdate:modelValue":e[12]||(e[12]=t=>n.value.is_active=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])])}}},ge=le(ye,[["__scopeId","data-v-c614f64f"]]);export{ge as default};
