import{g as $,d as z,u as D,c as A}from"./salary-D8WkJmXh.js";import{_ as j,r as c,n as F,c as G,o as H,b as e,w as t,d as n,x as i,t as J,e as y,a as m,E as K}from"./index-YcB68Cng.js";import"./request-B7eEf2UR.js";import"./index-xsH4HHeE.js";const L={class:"salary-items"},O={class:"card-header"},P={class:"dialog-footer"},Q={__name:"SalaryItems",setup(R){const V=c([]),s=c(!1),b=c(""),o=c({name:"",code:"",type:"",description:"",calculation_formula:"",is_fixed:!0,default_value:0}),_=c(null),f=async()=>{try{const u=await $();u.code===0&&(V.value=u.data)}catch{m.error("获取薪酬项列表失败")}},w=()=>{b.value="新增薪酬项",o.value={name:"",code:"",type:"",description:"",calculation_formula:"",is_fixed:!0,default_value:0},_.value=null,s.value=!0},g=u=>{b.value="编辑薪酬项",o.value={...u},_.value=u.id,s.value=!0},k=u=>{K.confirm("确定要删除该薪酬项吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{(await z(u.id)).code===0&&(m.success("删除成功"),f())}catch{m.error("删除失败")}})},C=async()=>{try{_.value?(await D(_.value,o.value)).code===0&&(m.success("更新成功"),s.value=!1,f()):(await A(o.value)).code===0&&(m.success("创建成功"),s.value=!1,f())}catch{m.error("操作失败")}};return F(()=>{f()}),(u,l)=>{const p=n("el-button"),d=n("el-table-column"),I=n("el-tag"),S=n("el-table"),U=n("el-card"),v=n("el-input"),r=n("el-form-item"),x=n("el-option"),B=n("el-select"),E=n("el-switch"),T=n("el-input-number"),q=n("el-form"),M=n("el-dialog");return H(),G("div",L,[e(U,{class:"box-card"},{header:t(()=>[y("div",O,[l[10]||(l[10]=y("span",null,"薪酬项管理",-1)),e(p,{type:"primary",onClick:w},{default:t(()=>l[9]||(l[9]=[i("新增薪酬项")])),_:1})])]),default:t(()=>[e(S,{data:V.value,style:{width:"100%"}},{default:t(()=>[e(d,{prop:"name",label:"名称"}),e(d,{prop:"code",label:"编码"}),e(d,{prop:"type",label:"类型"}),e(d,{prop:"description",label:"描述"}),e(d,{prop:"is_fixed",label:"是否固定值"},{default:t(a=>[e(I,{type:a.row.is_fixed?"success":"warning"},{default:t(()=>[i(J(a.row.is_fixed?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),e(d,{prop:"default_value",label:"默认值"}),e(d,{label:"操作",width:"200"},{default:t(a=>[e(p,{size:"small",onClick:N=>g(a.row)},{default:t(()=>l[11]||(l[11]=[i("编辑")])),_:2},1032,["onClick"]),e(p,{size:"small",type:"danger",onClick:N=>k(a.row)},{default:t(()=>l[12]||(l[12]=[i("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),e(M,{title:b.value,modelValue:s.value,"onUpdate:modelValue":l[8]||(l[8]=a=>s.value=a),width:"50%"},{footer:t(()=>[y("span",P,[e(p,{onClick:l[7]||(l[7]=a=>s.value=!1)},{default:t(()=>l[13]||(l[13]=[i("取消")])),_:1}),e(p,{type:"primary",onClick:C},{default:t(()=>l[14]||(l[14]=[i("确定")])),_:1})])]),default:t(()=>[e(q,{model:o.value,"label-width":"120px"},{default:t(()=>[e(r,{label:"名称",required:""},{default:t(()=>[e(v,{modelValue:o.value.name,"onUpdate:modelValue":l[0]||(l[0]=a=>o.value.name=a)},null,8,["modelValue"])]),_:1}),e(r,{label:"编码",required:""},{default:t(()=>[e(v,{modelValue:o.value.code,"onUpdate:modelValue":l[1]||(l[1]=a=>o.value.code=a)},null,8,["modelValue"])]),_:1}),e(r,{label:"类型",required:""},{default:t(()=>[e(B,{modelValue:o.value.type,"onUpdate:modelValue":l[2]||(l[2]=a=>o.value.type=a),placeholder:"请选择类型"},{default:t(()=>[e(x,{label:"收入",value:"income"}),e(x,{label:"支出",value:"expense"})]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"描述"},{default:t(()=>[e(v,{modelValue:o.value.description,"onUpdate:modelValue":l[3]||(l[3]=a=>o.value.description=a),type:"textarea"},null,8,["modelValue"])]),_:1}),e(r,{label:"计算公式"},{default:t(()=>[e(v,{modelValue:o.value.calculation_formula,"onUpdate:modelValue":l[4]||(l[4]=a=>o.value.calculation_formula=a)},null,8,["modelValue"])]),_:1}),e(r,{label:"是否固定值"},{default:t(()=>[e(E,{modelValue:o.value.is_fixed,"onUpdate:modelValue":l[5]||(l[5]=a=>o.value.is_fixed=a)},null,8,["modelValue"])]),_:1}),e(r,{label:"默认值"},{default:t(()=>[e(T,{modelValue:o.value.default_value,"onUpdate:modelValue":l[6]||(l[6]=a=>o.value.default_value=a),precision:2,step:.1},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])])}}},h=j(Q,[["__scopeId","data-v-4766d1e9"]]);export{h as default};
