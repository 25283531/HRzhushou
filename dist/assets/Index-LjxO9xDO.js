const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BOa6RSH0.js","assets/index-xsH4HHeE.js"])))=>i.map(i=>d[i]);
import{_ as Ve,r as p,l as H,n as we,q as R,a as y,c as E,o as g,b as e,w as a,e as V,v as ke,d as s,F,h as I,x as u,u as N,C as Ce,D as he,y as xe,j as z,t as _,G as Ue,z as De,A as Ee,E as ze}from"./index-YcB68Cng.js";const Oe={class:"employee-container"},Se={class:"card-header"},$e={class:"header-actions"},Fe={class:"search-container"},Ie={class:"pagination-container"},Ne={class:"dialog-footer"},Te={class:"import-actions"},qe={class:"dialog-footer"},Be={__name:"Index",setup(Le){const C=p(!1),T=p([]),O=p(1),q=p(10),B=p(0),b=H({name:"",employeeNumber:"",department:""}),J=p([{value:"技术部",label:"技术部"},{value:"人事部",label:"人事部"},{value:"财务部",label:"财务部"},{value:"市场部",label:"市场部"},{value:"销售部",label:"销售部"}]),K=p([{value:"技术部",label:"技术部"},{value:"人事部",label:"人事部"},{value:"财务部",label:"财务部"},{value:"市场部",label:"市场部"},{value:"销售部",label:"销售部"}]),Q=p([{value:"开发组",label:"开发组"},{value:"测试组",label:"测试组"},{value:"运维组",label:"运维组"},{value:"招聘组",label:"招聘组"},{value:"培训组",label:"培训组"}]),W=p([{value:1,label:"普通员工薪资组"},{value:2,label:"管理层薪资组"},{value:3,label:"技术专家薪资组"}]),Y=p([{value:1,label:"标准社保组"},{value:2,label:"高级社保组"}]),x=p(!1),S=p(!1),j=p(null),o=H({id:"",name:"",employee_number:"",id_card_number:"",phone:"",department_level1:"",department_level2:"",position:"",entry_date:"",status:"在职",salary_group:"",social_security_group:"",bank_account:"",remarks:""}),Z={name:[{required:!0,message:"请输入员工姓名",trigger:"blur"}],employee_number:[{required:!0,message:"请输入工号",trigger:"blur"}],id_card_number:[{required:!0,message:"请输入身份证号",trigger:"blur"},{pattern:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,message:"请输入正确的身份证号",trigger:"blur"}],phone:[{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}],department_level1:[{required:!0,message:"请选择一级部门",trigger:"change"}],entry_date:[{required:!0,message:"请选择入职日期",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},$=p(!1),A=p(null),L=p(!1),m=p({});we(()=>{h()});const h=()=>{C.value=!0,R(async()=>{const{default:n}=await import("./index-BOa6RSH0.js");return{default:n}},__vite__mapDeps([0,1])).then(({default:n})=>{const l={name:b.name,employee_number:b.employeeNumber,department:b.department,page:O.value,page_size:q.value,_t:new Date().getTime()};n.get("/employee/list",{params:l}).then(d=>{d.success?(T.value=d.data.items||[],B.value=d.data.total||0):(y.error(d.error||"获取员工数据失败"),T.value=[],B.value=0),C.value=!1}).catch(d=>{console.error("获取员工数据失败:",d),y.error("获取员工数据失败"),T.value=[],B.value=0,C.value=!1})})},G=()=>{O.value=1,h()},ee=()=>{Object.keys(b).forEach(n=>{b[n]=""}),G()},le=()=>{S.value=!1,Object.keys(o).forEach(n=>{o[n]=n==="status"?"在职":""}),x.value=!0},ae=n=>{S.value=!0,Object.keys(o).forEach(l=>{o[l]=n[l]||""}),x.value=!0},te=()=>{j.value.validate(n=>{if(n){C.value=!0;const l={...o,entry_date:o.entry_date?new Date(o.entry_date).toISOString().split("T")[0]:null,salary_group:o.salary_group?Number(o.salary_group):null,social_security_group:o.social_security_group?Number(o.social_security_group):null,department_level2:o.department_level2||"",position:o.position||"",bank_account:o.bank_account||"",phone:o.phone||"",remarks:o.remarks||""};R(async()=>{const{default:d}=await import("./index-BOa6RSH0.js");return{default:d}},__vite__mapDeps([0,1])).then(({default:d})=>{(S.value?d.put(`/employee/${l.id}`,l):d.post("/employee",l)).then(i=>{var r;i.success?(y.success(S.value?"员工信息更新成功":"员工添加成功"),x.value=!1,h()):y.error(((r=i.error)==null?void 0:r.message)||"操作失败"),C.value=!1}).catch(i=>{var r;console.error("保存员工信息失败:",i),y.error(((r=i.error)==null?void 0:r.message)||"保存员工信息失败"),C.value=!1})})}else return!1})},oe=n=>{ze.confirm("确定要删除该员工信息吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{R(async()=>{const{default:l}=await import("./index-BOa6RSH0.js");return{default:l}},__vite__mapDeps([0,1])).then(({default:l})=>{l.delete(`/employee/${n.id}`).then(d=>{d.success?(y({type:"success",message:"删除成功"}),h()):y.error(d.error||"删除失败")}).catch(d=>{console.error("删除员工失败:",d),y.error("删除员工失败")})})}).catch(()=>{})},ue=n=>{m.value={...n},L.value=!0},ne=()=>{$.value=!0},re=n=>{A.value=n.raw},de=()=>{y({message:"模板下载功能正在开发中",type:"info"})},se=()=>{if(!A.value){y.error("请选择要导入的文件");return}y.success("员工数据导入成功"),$.value=!1,h()},pe=n=>{O.value=n,h()},ie=n=>{q.value=n,h()};return(n,l)=>{const d=s("el-icon"),v=s("el-button"),i=s("el-input"),r=s("el-form-item"),k=s("el-option"),U=s("el-select"),M=s("el-form"),w=s("el-table-column"),me=s("el-tag"),_e=s("el-table"),ve=s("el-pagination"),fe=s("el-card"),c=s("el-col"),D=s("el-row"),be=s("el-date-picker"),P=s("el-dialog"),ce=s("el-upload"),f=s("el-descriptions-item"),ge=s("el-descriptions"),ye=xe("loading");return g(),E("div",Oe,[e(fe,{class:"employee-card"},{header:a(()=>[V("div",Se,[l[25]||(l[25]=V("h2",null,"员工信息管理",-1)),V("div",$e,[e(v,{type:"primary",onClick:le},{default:a(()=>[e(d,null,{default:a(()=>[e(N(Ue))]),_:1}),l[23]||(l[23]=u(" 添加员工 "))]),_:1}),e(v,{type:"success",onClick:ne},{default:a(()=>[e(d,null,{default:a(()=>[e(N(De))]),_:1}),l[24]||(l[24]=u(" 批量导入 "))]),_:1})])])]),default:a(()=>[V("div",Fe,[e(M,{inline:!0,model:b,class:"search-form"},{default:a(()=>[e(r,{label:"员工姓名"},{default:a(()=>[e(i,{modelValue:b.name,"onUpdate:modelValue":l[0]||(l[0]=t=>b.name=t),placeholder:"请输入员工姓名",clearable:""},null,8,["modelValue"])]),_:1}),e(r,{label:"工号"},{default:a(()=>[e(i,{modelValue:b.employeeNumber,"onUpdate:modelValue":l[1]||(l[1]=t=>b.employeeNumber=t),placeholder:"请输入工号",clearable:""},null,8,["modelValue"])]),_:1}),e(r,{label:"部门"},{default:a(()=>[e(U,{modelValue:b.department,"onUpdate:modelValue":l[2]||(l[2]=t=>b.department=t),placeholder:"请选择部门",clearable:""},{default:a(()=>[(g(!0),E(F,null,I(J.value,t=>(g(),z(k,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(r,null,{default:a(()=>[e(v,{type:"primary",onClick:G},{default:a(()=>[e(d,null,{default:a(()=>[e(N(Ce))]),_:1}),l[26]||(l[26]=u(" 搜索 "))]),_:1}),e(v,{onClick:ee},{default:a(()=>[e(d,null,{default:a(()=>[e(N(he))]),_:1}),l[27]||(l[27]=u(" 重置 "))]),_:1})]),_:1})]),_:1},8,["model"])]),ke((g(),z(_e,{data:T.value,border:"",style:{width:"100%"},"max-height":"500"},{default:a(()=>[e(w,{prop:"name",label:"员工姓名",width:"120"}),e(w,{prop:"employee_number",label:"工号",width:"120"}),e(w,{prop:"id_card_number",label:"身份证号",width:"180"}),e(w,{prop:"department_level1",label:"一级部门",width:"120"}),e(w,{prop:"department_level2",label:"二级部门",width:"120"}),e(w,{prop:"position",label:"职务",width:"120"}),e(w,{prop:"entry_date",label:"入职日期",width:"120"}),e(w,{prop:"status",label:"状态",width:"100"},{default:a(t=>[e(me,{type:t.row.status==="在职"?"success":"info",effect:"plain"},{default:a(()=>[u(_(t.row.status),1)]),_:2},1032,["type"])]),_:1}),e(w,{label:"操作",width:"200",fixed:"right"},{default:a(t=>[e(v,{size:"small",onClick:X=>ae(t.row)},{default:a(()=>l[28]||(l[28]=[u("编辑")])),_:2},1032,["onClick"]),e(v,{size:"small",type:"danger",onClick:X=>oe(t.row)},{default:a(()=>l[29]||(l[29]=[u("删除")])),_:2},1032,["onClick"]),e(v,{size:"small",type:"info",onClick:X=>ue(t.row)},{default:a(()=>l[30]||(l[30]=[u("详情")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[ye,C.value]]),V("div",Ie,[e(ve,{"current-page":O.value,"onUpdate:currentPage":l[3]||(l[3]=t=>O.value=t),"page-size":q.value,"onUpdate:pageSize":l[4]||(l[4]=t=>q.value=t),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:B.value,onSizeChange:ie,onCurrentChange:pe},null,8,["current-page","page-size","total"])])]),_:1}),e(P,{modelValue:x.value,"onUpdate:modelValue":l[19]||(l[19]=t=>x.value=t),title:S.value?"编辑员工":"添加员工",width:"700px"},{footer:a(()=>[V("span",Ne,[e(v,{onClick:l[18]||(l[18]=t=>x.value=!1)},{default:a(()=>l[31]||(l[31]=[u("取消")])),_:1}),e(v,{type:"primary",onClick:te},{default:a(()=>l[32]||(l[32]=[u("确定")])),_:1})])]),default:a(()=>[e(M,{model:o,rules:Z,ref_key:"employeeFormRef",ref:j,"label-width":"120px"},{default:a(()=>[e(D,{gutter:20},{default:a(()=>[e(c,{span:12},{default:a(()=>[e(r,{label:"员工姓名",prop:"name"},{default:a(()=>[e(i,{modelValue:o.name,"onUpdate:modelValue":l[5]||(l[5]=t=>o.name=t),placeholder:"请输入员工姓名"},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:a(()=>[e(r,{label:"工号",prop:"employee_number"},{default:a(()=>[e(i,{modelValue:o.employee_number,"onUpdate:modelValue":l[6]||(l[6]=t=>o.employee_number=t),placeholder:"请输入工号"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(D,{gutter:20},{default:a(()=>[e(c,{span:12},{default:a(()=>[e(r,{label:"身份证号",prop:"id_card_number"},{default:a(()=>[e(i,{modelValue:o.id_card_number,"onUpdate:modelValue":l[7]||(l[7]=t=>o.id_card_number=t),placeholder:"请输入身份证号"},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:a(()=>[e(r,{label:"手机号码",prop:"phone"},{default:a(()=>[e(i,{modelValue:o.phone,"onUpdate:modelValue":l[8]||(l[8]=t=>o.phone=t),placeholder:"请输入手机号码"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(D,{gutter:20},{default:a(()=>[e(c,{span:12},{default:a(()=>[e(r,{label:"一级部门",prop:"department_level1"},{default:a(()=>[e(U,{modelValue:o.department_level1,"onUpdate:modelValue":l[9]||(l[9]=t=>o.department_level1=t),placeholder:"请选择一级部门",style:{width:"100%"}},{default:a(()=>[(g(!0),E(F,null,I(K.value,t=>(g(),z(k,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:a(()=>[e(r,{label:"二级部门",prop:"department_level2"},{default:a(()=>[e(U,{modelValue:o.department_level2,"onUpdate:modelValue":l[10]||(l[10]=t=>o.department_level2=t),placeholder:"请选择二级部门",style:{width:"100%"}},{default:a(()=>[(g(!0),E(F,null,I(Q.value,t=>(g(),z(k,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(D,{gutter:20},{default:a(()=>[e(c,{span:12},{default:a(()=>[e(r,{label:"职务",prop:"position"},{default:a(()=>[e(i,{modelValue:o.position,"onUpdate:modelValue":l[11]||(l[11]=t=>o.position=t),placeholder:"请输入职务"},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:a(()=>[e(r,{label:"入职日期",prop:"entry_date"},{default:a(()=>[e(be,{modelValue:o.entry_date,"onUpdate:modelValue":l[12]||(l[12]=t=>o.entry_date=t),type:"date",placeholder:"选择入职日期",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(D,{gutter:20},{default:a(()=>[e(c,{span:12},{default:a(()=>[e(r,{label:"状态",prop:"status"},{default:a(()=>[e(U,{modelValue:o.status,"onUpdate:modelValue":l[13]||(l[13]=t=>o.status=t),placeholder:"请选择状态",style:{width:"100%"}},{default:a(()=>[e(k,{label:"在职",value:"在职"}),e(k,{label:"离职",value:"离职"}),e(k,{label:"试用期",value:"试用期"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:a(()=>[e(r,{label:"薪资组",prop:"salary_group"},{default:a(()=>[e(U,{modelValue:o.salary_group,"onUpdate:modelValue":l[14]||(l[14]=t=>o.salary_group=t),placeholder:"请选择薪资组",style:{width:"100%"}},{default:a(()=>[(g(!0),E(F,null,I(W.value,t=>(g(),z(k,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(D,{gutter:20},{default:a(()=>[e(c,{span:12},{default:a(()=>[e(r,{label:"社保组",prop:"social_security_group"},{default:a(()=>[e(U,{modelValue:o.social_security_group,"onUpdate:modelValue":l[15]||(l[15]=t=>o.social_security_group=t),placeholder:"请选择社保组",style:{width:"100%"}},{default:a(()=>[(g(!0),E(F,null,I(Y.value,t=>(g(),z(k,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:a(()=>[e(r,{label:"银行卡号",prop:"bank_account"},{default:a(()=>[e(i,{modelValue:o.bank_account,"onUpdate:modelValue":l[16]||(l[16]=t=>o.bank_account=t),placeholder:"请输入银行卡号"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r,{label:"备注",prop:"remarks"},{default:a(()=>[e(i,{modelValue:o.remarks,"onUpdate:modelValue":l[17]||(l[17]=t=>o.remarks=t),type:"textarea",rows:3,placeholder:"请输入备注信息"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),e(P,{modelValue:$.value,"onUpdate:modelValue":l[21]||(l[21]=t=>$.value=t),title:"批量导入员工",width:"600px"},{footer:a(()=>[V("span",qe,[e(v,{onClick:l[20]||(l[20]=t=>$.value=!1)},{default:a(()=>l[36]||(l[36]=[u("取消")])),_:1}),e(v,{type:"primary",onClick:se},{default:a(()=>l[37]||(l[37]=[u("导入")])),_:1})])]),default:a(()=>[e(ce,{class:"upload-demo",drag:"",action:"/employee/import","auto-upload":!1,"on-change":re,limit:1,accept:".xlsx,.xls,.csv"},{tip:a(()=>l[33]||(l[33]=[V("div",{class:"el-upload__tip"}," 支持 Excel 或 CSV 格式文件，请确保文件格式正确 ",-1)])),default:a(()=>[e(d,{class:"el-icon--upload"},{default:a(()=>[e(N(Ee))]),_:1}),l[34]||(l[34]=V("div",{class:"el-upload__text"},[u(" 将文件拖到此处，或"),V("em",null,"点击上传")],-1))]),_:1}),V("div",Te,[e(v,{type:"primary",onClick:de},{default:a(()=>l[35]||(l[35]=[u("下载导入模板")])),_:1})])]),_:1},8,["modelValue"]),e(P,{modelValue:L.value,"onUpdate:modelValue":l[22]||(l[22]=t=>L.value=t),title:"员工详情",width:"800px"},{default:a(()=>[e(ge,{column:2,border:""},{default:a(()=>[e(f,{label:"员工姓名"},{default:a(()=>[u(_(m.value.name),1)]),_:1}),e(f,{label:"工号"},{default:a(()=>[u(_(m.value.employee_number),1)]),_:1}),e(f,{label:"身份证号"},{default:a(()=>[u(_(m.value.id_card_number),1)]),_:1}),e(f,{label:"手机号码"},{default:a(()=>[u(_(m.value.phone),1)]),_:1}),e(f,{label:"一级部门"},{default:a(()=>[u(_(m.value.department_level1),1)]),_:1}),e(f,{label:"二级部门"},{default:a(()=>[u(_(m.value.department_level2),1)]),_:1}),e(f,{label:"职务"},{default:a(()=>[u(_(m.value.position),1)]),_:1}),e(f,{label:"入职日期"},{default:a(()=>[u(_(m.value.entry_date),1)]),_:1}),e(f,{label:"状态"},{default:a(()=>[u(_(m.value.status),1)]),_:1}),e(f,{label:"薪资组"},{default:a(()=>[u(_(m.value.salary_group),1)]),_:1}),e(f,{label:"社保组"},{default:a(()=>[u(_(m.value.social_security_group),1)]),_:1}),e(f,{label:"银行卡号"},{default:a(()=>[u(_(m.value.bank_account),1)]),_:1}),e(f,{label:"备注",span:2},{default:a(()=>[u(_(m.value.remarks),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},Re=Ve(Be,[["__scopeId","data-v-7dbd5681"]]);export{Re as default};
