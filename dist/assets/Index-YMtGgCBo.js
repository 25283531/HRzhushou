const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-B3CWdENx.js","assets/index-DUy0cMb6.js","assets/index-B-8b3tac.css"])))=>i.map(i=>d[i]);
var Ve=Object.defineProperty;var Ae=(O,l,r)=>l in O?Ve(O,l,{enumerable:!0,configurable:!0,writable:!0,value:r}):O[l]=r;var re=(O,l,r)=>Ae(O,typeof l!="symbol"?l+"":l,r);import{_ as Ce,r as p,l as Z,n as Te,p as Ie,q,a as m,v as Fe,c as S,o as d,b as s,w as o,x as ue,e as k,d as b,y as f,z as Ee,j as g,t as ee,u as ie,A as Ne,B as M,C as Oe,F as C,h as T,E as de,D as Ue}from"./index-DUy0cMb6.js";import{f as Le,r as Pe,u as W,w as $e}from"./xlsx-DV6Az1Hj.js";const Re={autoBackup:!0,backupInterval:24*60*60*1e3,maxBackupCount:10,backupPath:"backups",includeAttendance:!0,includeEmployees:!0,includeSalaryGroups:!0,includeSalaryRecords:!0};class Je{constructor(l=10){re(this,"handleBeforeUnload",()=>{(!this.lastBackupTime||Date.now()-this.lastBackupTime>60*60*1e3)&&this.createBackup(!0)});this.maxBackupCount=l,this.settings={...Re},this.isBackingUp=!1,this.backupTimer=null,this.lastBackupTime=null,this.loadSettings()}loadSettings(){try{const l=localStorage.getItem("backupSettings");l&&(this.settings={...this.settings,...JSON.parse(l)})}catch(l){console.error("加载备份设置失败:",l)}}saveSettings(){try{localStorage.setItem("backupSettings",JSON.stringify(this.settings))}catch(l){console.error("保存备份设置失败:",l)}}async backupDatabase(){const l=new Date().toISOString().replace(/[:.]/g,"-"),r=await this.getAllData();await this.saveToIndexedDB(l,r),await this.cleanupOldBackups()}async getAllData(){const l={};return this.settings.includeAttendance&&(l.attendance=await this.fetchDataToBackup("attendance")),this.settings.includeEmployees&&(l.employees=await this.fetchDataToBackup("employees")),this.settings.includeSalaryGroups&&(l.salaryGroups=await this.fetchDataToBackup("salaryGroups")),this.settings.includeSalaryRecords&&(l.salaryRecords=await this.fetchDataToBackup("salaryRecords")),l}async saveToIndexedDB(l,r){return new Promise((i,c)=>{const h=indexedDB.open("HRBackups",1);h.onerror=()=>c(h.error),h.onsuccess=()=>{const B=h.result.transaction(["backups"],"readwrite");B.objectStore("backups").add({timestamp:l,data:r,createdAt:new Date}),B.oncomplete=()=>i(),B.onerror=()=>c(B.error)},h.onupgradeneeded=D=>{const B=D.target.result;B.objectStoreNames.contains("backups")||B.createObjectStore("backups",{keyPath:"timestamp"})}})}updateSettings(l){this.maxBackupCount=l.maxBackupCount||this.maxBackupCount,this.settings={...this.settings,...l},this.saveSettings(),this.stopAutoBackup(),this.settings.autoBackup&&this.startAutoBackup()}startAutoBackup(){this.backupTimer&&this.stopAutoBackup(),this.backupTimer=setInterval(()=>{this.createBackup()},this.settings.backupInterval),window.addEventListener("beforeunload",this.handleBeforeUnload)}stopAutoBackup(){this.backupTimer&&(clearInterval(this.backupTimer),this.backupTimer=null),window.removeEventListener("beforeunload",this.handleBeforeUnload)}async createBackup(l=!1){if(this.isBackingUp)return{success:!1,message:"备份正在进行中"};this.isBackingUp=!0;try{const r={};this.settings.includeAttendance&&(r.attendance=await this.fetchDataToBackup("attendance")),this.settings.includeEmployees&&(r.employees=await this.fetchDataToBackup("employees")),this.settings.includeSalaryGroups&&(r.salaryGroups=await this.fetchDataToBackup("salaryGroups")),this.settings.includeSalaryRecords&&(r.salaryRecords=await this.fetchDataToBackup("salaryRecords"));const i=this.generateBackupFileName(l),c=await this.saveBackupFile(i,r);return await this.cleanupOldBackups(),this.lastBackupTime=Date.now(),c}catch(r){return console.error("创建备份失败:",r),{success:!1,message:`备份失败: ${r.message}`}}finally{this.isBackingUp=!1}}async fetchDataToBackup(l){try{const r=localStorage.getItem(l);return r?JSON.parse(r):[]}catch(r){return console.error(`获取${l}数据失败:`,r),[]}}generateBackupFileName(l){const i=Le(new Date,"yyyyMMdd_HHmmss");return`${l?"exit_backup":"auto_backup"}_${i}.json`}async saveBackupFile(l,r){try{const i=this.getBackupList(),c={fileName:l,createdAt:new Date().toISOString(),size:JSON.stringify(r).length,data:r};return i.push(c),localStorage.setItem("backupList",JSON.stringify(i.map(h=>{const{data:D,...B}=h;return B}))),localStorage.setItem(`backup_${l}`,JSON.stringify(r)),{success:!0,message:"备份创建成功",fileName:l,createdAt:c.createdAt}}catch(i){return console.error("保存备份文件失败:",i),{success:!1,message:`保存备份文件失败: ${i.message}`}}}getBackupList(){try{const l=localStorage.getItem("backupList");return l?JSON.parse(l):[]}catch(l){return console.error("获取备份列表失败:",l),[]}}async cleanupOldBackups(){try{const l=this.getBackupList();if(l.length>this.settings.maxBackupCount){l.sort((c,h)=>new Date(c.createdAt)-new Date(h.createdAt));const r=l.slice(0,l.length-this.settings.maxBackupCount);for(const c of r)localStorage.removeItem(`backup_${c.fileName}`);const i=l.slice(l.length-this.settings.maxBackupCount);localStorage.setItem("backupList",JSON.stringify(i))}}catch(l){console.error("清理旧备份失败:",l)}}async restoreBackup(l){try{const r=localStorage.getItem(`backup_${l}`);if(!r)return{success:!1,message:"备份文件不存在"};const i=JSON.parse(r);return i.attendance&&localStorage.setItem("attendance",JSON.stringify(i.attendance)),i.employees&&localStorage.setItem("employees",JSON.stringify(i.employees)),i.salaryGroups&&localStorage.setItem("salaryGroups",JSON.stringify(i.salaryGroups)),i.salaryRecords&&localStorage.setItem("salaryRecords",JSON.stringify(i.salaryRecords)),{success:!0,message:"备份恢复成功"}}catch(r){return console.error("恢复备份失败:",r),{success:!1,message:`恢复备份失败: ${r.message}`}}}async deleteBackup(l){try{localStorage.removeItem(`backup_${l}`);const i=this.getBackupList().filter(c=>c.fileName!==l);return localStorage.setItem("backupList",JSON.stringify(i)),{success:!0,message:"备份删除成功"}}catch(r){return console.error("删除备份失败:",r),{success:!1,message:`删除备份失败: ${r.message}`}}}}const te=new Je,Me={class:"attendance-container"},ze={class:"card-header"},Ge={class:"header-actions"},je={class:"dialog-footer"},Ye={class:"pagination-container"},He={key:1,style:{color:"#f56c6c"}},qe={class:"dialog-footer"},We={class:"custom-fields-section"},Ke={class:"section-header"},Qe={class:"custom-field-row"},Xe={class:"dialog-footer"},Ze={__name:"Index",setup(O){const l=p(""),r=p([]),i=p([]),c=p([]),h=p(!1),D=p([]),B=()=>{const a=[["姓名","工号","身份证号","考勤月份","应出勤天数","实际出勤天数","迟到次数","严重迟到次数","早退次数","严重早退次数","旷工次数","病假天数","事假天数","工伤休假天数","休年假天数","加班时长"],["张三","1001","123456789012345678","2024-05","22","22","0","0","0","0","0","0","0","0","0","0"],["李四","1002","987654321098765432","2024-05","22","21","1","0","0","0","0","0","0","0","0","2"]],e=W.aoa_to_sheet(a),u=W.book_new();W.book_append_sheet(u,e,"考勤模板"),$e(u,"考勤导入模板.xlsx")},I=p(!1),L=p([]),z=p(1),G=p(10),j=p(0),R=p(!1),F=Z({file:null}),K=p(!1),P=p(["A","B","C","D","E","F","G","H"]),_=Z({name:"",number:"",date:"",checkIn:"",checkOut:""}),ae=p([]);p(!1),p([{lateDeduction:0,lateFreeCount:0,seriousLateDeduction:0,seriousLateMinutes:0,earlyLeaveDeduction:0,missedPunchDeduction:0,absentDeduction:0}]);const Y=p([]),V=Z({month:new Date().toISOString().slice(0,7),employeeName:""});Te(()=>{U(),ce();try{te.updateSettings({autoBackup:!0,backupInterval:12*60*60*1e3,includeAttendance:!0})}catch(a){console.error("初始化备份服务失败:",a)}}),Ie(()=>{try{te.stopAutoBackup()}catch(a){console.error("停止自动备份失败:",a)}});const U=()=>{I.value=!0,q(async()=>{const{default:a}=await import("./index-B3CWdENx.js");return{default:a}},__vite__mapDeps([0,1,2])).then(({default:a})=>{const e={month:V.month,page:z.value,page_size:G.value};a.get("/attendance/list",{params:e}).then(u=>{u&&u.success?(L.value=u.data.items||[],j.value=u.data.total||0):(m.error((u==null?void 0:u.error)||"获取考勤数据失败"),L.value=[],j.value=0)}).catch(u=>{console.error("获取考勤数据失败:",u),m.error("获取考勤数据失败: "+(u.message||"未知错误")),L.value=[],j.value=0}).finally(()=>{I.value=!1})}).catch(a=>{console.error("导入API模块失败:",a),m.error("系统错误: 无法加载API模块"),I.value=!1})},ce=()=>{I.value=!0,q(async()=>{const{default:a}=await import("./index-B3CWdENx.js");return{default:a}},__vite__mapDeps([0,1,2])).then(({default:a})=>{a.get("/employee/list").then(e=>{e&&e.success&&e.data&&Array.isArray(e.data.items)?Y.value=e.data.items||[]:(console.error("员工数据接口返回异常:",e),m.error((e==null?void 0:e.error)||"获取员工数据失败"),Y.value=[])}).catch(e=>{console.error("获取员工数据失败:",e),m.error("获取员工数据失败: "+(e.message||"未知错误")),Y.value=[]}).finally(()=>{I.value=!1})}).catch(a=>{console.error("导入API模块失败:",a),m.error("系统错误: 无法加载API模块"),I.value=!1})},pe=()=>{R.value=!0},me=()=>{if(!Array.isArray(Q.value)||!Array.isArray(c.value)||c.value.length===0){m.error("请先上传并选择包含表头的Excel文件"),D.value=[];return}D.value=Q.value.filter(a=>!!a&&typeof a=="object"&&a.dbField).map(a=>({dbField:a.dbField,excelField:c.value.includes(a.label)?a.label:c.value[0]||""})).filter(a=>!!a.dbField&&typeof a.excelField=="string"),h.value=!0},fe=a=>{F.file=a.raw;const e=new FileReader;e.onload=u=>{try{const n=new Uint8Array(u.target.result),x=Pe(n,{type:"array"});r.value=x.SheetNames,r.value.length===1?(l.value=r.value[0],le(x,l.value)):(l.value="",i.value=[],c.value=[]),h.value=!1,D.value=[],F.workbook=x}catch(n){m.error("解析Excel文件失败: "+n.message)}},e.readAsArrayBuffer(a.raw)};Fe(l,a=>{a&&F.workbook&&le(F.workbook,a)});function le(a,e){const u=a.Sheets[e],n=W.sheet_to_json(u,{header:1});n.length>1?(c.value=n[0],i.value=n.slice(1,6).map(x=>{const y={};return c.value.forEach((J,$)=>{y[J]=x[$]||""}),y})):(c.value=[],i.value=[])}const oe=[{id:1,name:"迟到",chargeType:"byTimes",freeTimes:3,amountPerTime:20,formula:""},{id:2,name:"早退",chargeType:"byTimes",freeTimes:2,amountPerTime:15,formula:""},{id:3,name:"旷工",chargeType:"byDays",freeTimes:0,amountPerTime:0,formula:"(基本工资+绩效工资)/应出勤天数*旷工天数"},{id:4,name:"病假",chargeType:"byDays",freeTimes:0,amountPerTime:0,formula:"(基本工资+绩效工资)/应出勤天数*病假天数*0.5"}],se=()=>{try{const a=JSON.parse(localStorage.getItem("attendanceRules"));return Array.isArray(a)&&a.length>0?a:oe}catch{return oe}},Q=p([{dbField:"name",label:"员工姓名"},{dbField:"number",label:"工号"},{dbField:"idCard",label:"身份证号"},{dbField:"month",label:"考勤月份"},{dbField:"shouldWorkDays",label:"应出勤天数"},{dbField:"actualWorkDays",label:"实际出勤天数"},...se().map(a=>({dbField:a.name,label:a.name}))]),ge=()=>{if(!F.file){m.error("请选择要导入的文件");return}const a=Ue.service({lock:!0,text:"正在导入数据...",background:"rgba(0, 0, 0, 0.7)"}),e=new FormData;e.append("file",F.file),e.append("fieldMapping",JSON.stringify(_)),e.append("customFields",JSON.stringify(ae.value)),q(async()=>{const{default:u}=await import("./index-B3CWdENx.js");return{default:u}},__vite__mapDeps([0,1,2])).then(({default:u})=>{u.post("/attendance/import",e,{headers:{"Content-Type":"multipart/form-data"}}).then(n=>{n&&n.success?(m.success(`成功导入 ${n.data.imported_count} 条考勤记录`),n.data.errors&&n.data.errors.length>0&&de.alert(`导入过程中有 ${n.data.errors.length} 个警告：
${n.data.errors.join(`
`)}`,"导入警告",{confirmButtonText:"确定",type:"warning"}),te.createBackup().then(x=>{x.success?console.log("数据备份成功:",x.fileName):console.error("数据备份失败:",x.message)}),U(),R.value=!1):m.error((n==null?void 0:n.error)||"导入考勤数据失败")}).catch(n=>{console.error("导入考勤数据失败:",n),m.error("导入失败: "+(n.message||"未知错误"))}).finally(()=>{a.close()})}).catch(u=>{console.error("导入API模块失败:",u),m.error("系统错误: 无法加载API模块"),a.close()})},ye=a=>{console.log("编辑行:",a)},he=a=>{de.confirm("确定要删除这条考勤记录吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{q(async()=>{const{default:e}=await import("./index-B3CWdENx.js");return{default:e}},__vite__mapDeps([0,1,2])).then(({default:e})=>{e.delete(`/attendance/${a.id}`).then(u=>{u&&u.success?(m({type:"success",message:"删除成功"}),U()):m.error((u==null?void 0:u.error)||"删除失败")}).catch(u=>{console.error("删除考勤记录失败:",u),m.error("删除失败: "+(u.message||"未知错误"))})}).catch(e=>{console.error("导入API模块失败:",e),m.error("系统错误: 无法加载API模块")})}).catch(()=>{})},ke=a=>{z.value=a,U()},be=a=>{G.value=a,U()},ve=a=>{const e=se(),u={正常:"success"};return e.forEach(n=>{n.name.includes("迟到")||n.name.includes("早退")?u[n.name]="warning":n.name.includes("旷工")||n.name.includes("缺卡")?u[n.name]="danger":u[n.name]="info"}),u[a]||"info"},_e=()=>{const a=V.employeeName&&V.employeeName.trim();if(a){if(!Y.value.find(n=>n.name===a)){m.warning("未查询到该员工，请重新输入");return}L.value.find(n=>n.employee_name===a)||m.info("花名册中有该员工，但是所选月份没有该员工的考勤数据")}U()},we=()=>{V.month=new Date().toISOString().slice(0,7),V.employeeName="",U()};return(a,e)=>{const u=b("el-icon"),n=b("el-button"),x=b("el-date-picker"),y=b("el-form-item"),J=b("el-input"),$=b("el-form"),w=b("el-table-column"),H=b("el-table"),X=b("el-dialog"),Se=b("el-tag"),Be=b("el-pagination"),xe=b("el-card"),De=b("el-upload"),E=b("el-option"),N=b("el-select"),ne=Ee("loading");return d(),S("div",Me,[s(xe,{class:"attendance-card"},{header:o(()=>[k("div",ze,[e[18]||(e[18]=k("h2",null,"考勤数据管理",-1)),k("div",Ge,[s(n,{type:"primary",onClick:pe},{default:o(()=>[s(u,null,{default:o(()=>[s(ie(Ne))]),_:1}),e[17]||(e[17]=f(" 导入考勤数据 "))]),_:1})])])]),default:o(()=>[s($,{inline:!0,model:V,class:"filter-form"},{default:o(()=>[s(y,{label:"月份"},{default:o(()=>[s(x,{modelValue:V.month,"onUpdate:modelValue":e[0]||(e[0]=t=>V.month=t),type:"month",placeholder:"选择月份",format:"YYYY-MM","value-format":"YYYY-MM"},null,8,["modelValue"])]),_:1}),s(y,{label:"员工"},{default:o(()=>[s(J,{modelValue:V.employeeName,"onUpdate:modelValue":e[1]||(e[1]=t=>V.employeeName=t),placeholder:"请输入员工姓名",clearable:""},null,8,["modelValue"])]),_:1}),s(y,null,{default:o(()=>[s(n,{type:"primary",onClick:_e},{default:o(()=>e[19]||(e[19]=[f("查询")])),_:1}),s(n,{onClick:we},{default:o(()=>e[20]||(e[20]=[f("重置")])),_:1})]),_:1})]),_:1},8,["model"]),ue((d(),g(H,{data:L.value,border:"",style:{width:"100%"},"max-height":"500"},{default:o(()=>[s(w,{prop:"employee_name",label:"姓名",width:"120"}),s(w,{prop:"employee_number",label:"工号",width:"120"}),s(w,{prop:"exception_detail",label:"考勤异常详情","min-width":"200"},{default:o(t=>[k("span",null,ee(t.row.exception_detail||"无异常"),1)]),_:1}),s(w,{label:"操作",width:"150",fixed:"right"},{default:o(t=>[s(n,{size:"small",onClick:v=>a.editExceptionDetail(t.row)},{default:o(()=>e[21]||(e[21]=[f("编辑异常")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[ne,I.value]]),s(X,{modelValue:a.exceptionDialogVisible,"onUpdate:modelValue":e[4]||(e[4]=t=>a.exceptionDialogVisible=t),title:"编辑考勤异常详情",width:"400px"},{footer:o(()=>[k("span",je,[s(n,{onClick:e[3]||(e[3]=t=>a.exceptionDialogVisible=!1)},{default:o(()=>e[22]||(e[22]=[f("取消")])),_:1}),s(n,{type:"primary",onClick:a.saveExceptionDetail},{default:o(()=>e[23]||(e[23]=[f("保存")])),_:1},8,["onClick"])])]),default:o(()=>[s($,{model:a.exceptionForm,"label-width":"100px"},{default:o(()=>[s(y,{label:"异常详情"},{default:o(()=>[s(J,{modelValue:a.exceptionForm.exception_detail,"onUpdate:modelValue":e[2]||(e[2]=t=>a.exceptionForm.exception_detail=t),type:"textarea",rows:"4",placeholder:"请输入异常详情"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),ue((d(),g(H,{data:L.value,border:"",style:{width:"100%"},"max-height":"500"},{default:o(()=>[s(w,{prop:"date",label:"日期",width:"120"}),s(w,{prop:"check_in",label:"上班打卡",width:"150"}),s(w,{prop:"check_out",label:"下班打卡",width:"150"}),s(w,{prop:"status",label:"状态"},{default:o(t=>[s(Se,{type:ve(t.row.status),effect:"plain"},{default:o(()=>[f(ee(t.row.status),1)]),_:2},1032,["type"])]),_:1}),s(w,{label:"操作",width:"150",fixed:"right"},{default:o(t=>[s(n,{size:"small",onClick:v=>ye(t.row)},{default:o(()=>e[24]||(e[24]=[f("编辑")])),_:2},1032,["onClick"]),s(n,{size:"small",type:"danger",onClick:v=>he(t.row)},{default:o(()=>e[25]||(e[25]=[f("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[ne,I.value]]),k("div",Ye,[s(Be,{"current-page":z.value,"onUpdate:currentPage":e[5]||(e[5]=t=>z.value=t),"page-size":G.value,"onUpdate:pageSize":e[6]||(e[6]=t=>G.value=t),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:j.value,onSizeChange:be,onCurrentChange:ke},null,8,["current-page","page-size","total"])])]),_:1}),s(X,{modelValue:R.value,"onUpdate:modelValue":e[9]||(e[9]=t=>R.value=t),title:"导入考勤数据",width:"700px"},{footer:o(()=>[k("span",qe,[s(n,{onClick:e[8]||(e[8]=t=>R.value=!1)},{default:o(()=>e[29]||(e[29]=[f("取消")])),_:1}),!h.value&&i.value.length?(d(),g(n,{key:0,type:"primary",onClick:me},{default:o(()=>e[30]||(e[30]=[f("下一步")])),_:1})):M("",!0),h.value?(d(),g(n,{key:1,type:"primary",onClick:ge},{default:o(()=>e[31]||(e[31]=[f("导入")])),_:1})):M("",!0)])]),default:o(()=>[s($,{model:F,"label-width":"120px"},{default:o(()=>[s(y,{label:"考勤数据文件"},{default:o(()=>[s(De,{class:"upload-demo",drag:"","auto-upload":!1,"on-change":fe,limit:1,accept:".xlsx,.xls"},{tip:o(()=>e[26]||(e[26]=[k("div",{class:"el-upload__tip"}," 仅支持Excel格式文件（.xlsx/.xls） ",-1)])),default:o(()=>[s(u,{class:"el-icon--upload"},{default:o(()=>[s(ie(Oe))]),_:1}),e[27]||(e[27]=k("div",{class:"el-upload__text"},[f(" 将文件拖到此处，或"),k("em",null,"点击上传")],-1))]),_:1}),s(n,{type:"success",style:{"margin-left":"20px"},onClick:B},{default:o(()=>e[28]||(e[28]=[f("下载模板")])),_:1})]),_:1}),r.value.length>1?(d(),g(y,{key:0,label:"选择工作表"},{default:o(()=>[s(N,{modelValue:l.value,"onUpdate:modelValue":e[7]||(e[7]=t=>l.value=t),placeholder:"请选择要导入的工作表",style:{width:"250px"}},{default:o(()=>[(d(!0),S(C,null,T(r.value,t=>(d(),g(E,{key:t,label:t,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):M("",!0),i.value.length?(d(),g(y,{key:1,label:"表格预览"},{default:o(()=>[s(H,{data:i.value,border:"",height:"200",style:{width:"100%"}},{default:o(()=>[(d(!0),S(C,null,T(c.value,t=>(d(),g(w,{key:t,prop:t,label:t},null,8,["prop","label"]))),128))]),_:1},8,["data"])]),_:1})):M("",!0),h.value&&F.file&&l.value&&Array.isArray(D.value)&&D.value.length>0?(d(),g(y,{key:2,label:"字段映射"},{default:o(()=>[s(H,{data:D.value.filter(t=>!!t&&typeof t=="object"),border:"",style:{width:"100%"}},{default:o(()=>[s(w,{prop:"dbField",label:"计算字段",width:"180"},{default:o(({row:t})=>{var v;return[f(ee(((v=Q.value.find(A=>A.dbField===t.dbField))==null?void 0:v.label)||t.dbField),1)]}),_:1}),s(w,{label:"Excel列名"},{default:o(({row:t})=>[t?(d(),g(N,{key:0,modelValue:t.excelField,"onUpdate:modelValue":v=>t.excelField=v,placeholder:"请选择Excel列名",style:{width:"200px"}},{default:o(()=>[(d(!0),S(C,null,T(c.value,v=>(d(),g(E,{key:v,label:v,value:v},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(d(),S("span",He,"无数据"))]),_:1})]),_:1},8,["data"])]),_:1})):M("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue"]),s(X,{modelValue:K.value,"onUpdate:modelValue":e[16]||(e[16]=t=>K.value=t),title:"设置字段映射",width:"800px"},{footer:o(()=>[k("span",Xe,[s(n,{onClick:e[15]||(e[15]=t=>K.value=!1)},{default:o(()=>e[35]||(e[35]=[f("取消")])),_:1}),s(n,{type:"primary",onClick:a.saveFieldMapping},{default:o(()=>e[36]||(e[36]=[f("保存映射")])),_:1},8,["onClick"])])]),default:o(()=>[s($,{model:_,"label-width":"120px"},{default:o(()=>[s(y,{label:"员工姓名字段"},{default:o(()=>[s(N,{modelValue:_.name,"onUpdate:modelValue":e[10]||(e[10]=t=>_.name=t),placeholder:"选择对应的Excel列"},{default:o(()=>[(d(!0),S(C,null,T(P.value,t=>(d(),g(E,{key:t,label:t,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(y,{label:"员工工号字段"},{default:o(()=>[s(N,{modelValue:_.number,"onUpdate:modelValue":e[11]||(e[11]=t=>_.number=t),placeholder:"选择对应的Excel列"},{default:o(()=>[(d(!0),S(C,null,T(P.value,t=>(d(),g(E,{key:t,label:t,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(y,{label:"日期字段"},{default:o(()=>[s(N,{modelValue:_.date,"onUpdate:modelValue":e[12]||(e[12]=t=>_.date=t),placeholder:"选择对应的Excel列"},{default:o(()=>[(d(!0),S(C,null,T(P.value,t=>(d(),g(E,{key:t,label:t,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(y,{label:"上班打卡字段"},{default:o(()=>[s(N,{modelValue:_.checkIn,"onUpdate:modelValue":e[13]||(e[13]=t=>_.checkIn=t),placeholder:"选择对应的Excel列"},{default:o(()=>[(d(!0),S(C,null,T(P.value,t=>(d(),g(E,{key:t,label:t,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(y,{label:"下班打卡字段"},{default:o(()=>[s(N,{modelValue:_.checkOut,"onUpdate:modelValue":e[14]||(e[14]=t=>_.checkOut=t),placeholder:"选择对应的Excel列"},{default:o(()=>[(d(!0),S(C,null,T(P.value,t=>(d(),g(E,{key:t,label:t,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),k("div",We,[k("div",Ke,[e[33]||(e[33]=k("h3",null,"自定义考勤字段",-1)),s(n,{type:"primary",size:"small",onClick:a.addCustomField},{default:o(()=>e[32]||(e[32]=[f("添加字段")])),_:1},8,["onClick"])]),(d(!0),S(C,null,T(ae.value,(t,v)=>(d(),g(y,{key:v,label:t.name||"自定义字段"},{default:o(()=>[k("div",Qe,[s(J,{modelValue:t.name,"onUpdate:modelValue":A=>t.name=A,placeholder:"字段名称",style:{width:"150px","margin-right":"10px"}},null,8,["modelValue","onUpdate:modelValue"]),s(N,{modelValue:t.column,"onUpdate:modelValue":A=>t.column=A,placeholder:"选择对应的Excel列",style:{width:"200px","margin-right":"10px"}},{default:o(()=>[(d(!0),S(C,null,T(P.value,A=>(d(),g(E,{key:A,label:A,value:A},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"]),s(n,{type:"danger",size:"small",onClick:A=>a.removeCustomField(v)},{default:o(()=>e[34]||(e[34]=[f("删除")])),_:2},1032,["onClick"])])]),_:2},1032,["label"]))),128))])]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},lt=Ce(Ze,[["__scopeId","data-v-05a2affe"]]);export{lt as default};
