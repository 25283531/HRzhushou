import{_ as I,r as A,c as d,o as i,b as e,w as l,e as s,d as n,y as b,F as c,h as E,a as F,B as J,u as v,N as h}from"./index-DUy0cMb6.js";const O={class:"attendance-rule-setting-container"},$={__name:"AttendanceRuleSetting",setup(q){const x=[{id:1,name:"迟到",chargeType:"byTimes",freeTimes:3,amountPerTime:20,formula:""},{id:2,name:"早退",chargeType:"byTimes",freeTimes:2,amountPerTime:15,formula:""},{id:3,name:"旷工",chargeType:"byDays",freeTimes:0,amountPerTime:0,formula:"(基本工资+绩效工资)/应出勤天数*旷工天数"},{id:4,name:"病假",chargeType:"byDays",freeTimes:0,amountPerTime:0,formula:"(基本工资+绩效工资)/应出勤天数*病假天数*0.5"}],u=A({rules:JSON.parse(localStorage.getItem("attendanceRules")||"null")||x});function k(){u.value.rules.push({id:Date.now(),name:"",chargeType:"byTimes",freeTimes:0,amountPerTime:0,formula:""})}function C(m){u.value.rules.splice(m,1)}function U(m){m.chargeType,m.formula="",m.freeTimes=0,m.amountPerTime=0}function w(){localStorage.setItem("attendanceRules",JSON.stringify(u.value.rules)),F.success("考勤规则已保存！")}return(m,a)=>{const p=n("el-button"),f=n("el-form-item"),_=n("el-input"),r=n("el-col"),y=n("el-option"),P=n("el-select"),T=n("el-input-number"),g=n("el-icon"),V=n("el-tooltip"),R=n("el-row"),N=n("el-form"),D=n("el-divider"),S=n("el-card");return i(),d("div",O,[e(S,null,{default:l(()=>[a[4]||(a[4]=s("h2",null,"考勤规则设置",-1)),e(N,{model:u.value,"label-width":"120px",class:"attendance-rule-form"},{default:l(()=>[e(f,{label:"考勤异常项"},{default:l(()=>[e(p,{type:"primary",onClick:k},{default:l(()=>a[0]||(a[0]=[b("添加异常项")])),_:1})]),_:1}),(i(!0),d(c,null,E(u.value.rules,(t,B)=>(i(),d("div",{key:t.id,class:"attendance-rule-item"},[e(R,{gutter:10},{default:l(()=>[e(r,{span:5},{default:l(()=>[e(_,{modelValue:t.name,"onUpdate:modelValue":o=>t.name=o,placeholder:"异常项名称，如迟到、旷工等"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(r,{span:5},{default:l(()=>[e(P,{modelValue:t.chargeType,"onUpdate:modelValue":o=>t.chargeType=o,placeholder:"扣款方式",onChange:o=>U(t)},{default:l(()=>[e(y,{label:"按次扣款",value:"byTimes"}),e(y,{label:"按天扣款",value:"byDays"})]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024),e(r,{span:12},{default:l(()=>[t.chargeType==="byTimes"?(i(),d(c,{key:0},[e(T,{modelValue:t.freeTimes,"onUpdate:modelValue":o=>t.freeTimes=o,min:0,label:"免扣款次数",placeholder:"免扣款次数",style:{width:"120px"}},null,8,["modelValue","onUpdate:modelValue"]),a[1]||(a[1]=s("span",{style:{margin:"0 8px"}},"次后，每次扣款",-1)),e(T,{modelValue:t.amountPerTime,"onUpdate:modelValue":o=>t.amountPerTime=o,min:0,label:"每次扣款金额",style:{width:"120px"}},null,8,["modelValue","onUpdate:modelValue"]),a[2]||(a[2]=s("span",null,"元",-1)),e(V,{effect:"dark",content:"如：迟到3次后，每次扣款20元",placement:"top"},{default:l(()=>[e(g,{style:{"margin-left":"6px"}},{default:l(()=>[e(v(h))]),_:1})]),_:1})],64)):t.chargeType==="byDays"?(i(),d(c,{key:1},[e(_,{modelValue:t.formula,"onUpdate:modelValue":o=>t.formula=o,placeholder:"请输入扣款公式",style:{width:"300px"}},null,8,["modelValue","onUpdate:modelValue"]),e(V,{effect:"dark",content:"如：旷工扣除金额=(基本工资+绩效工资)/应出勤天数*旷工天数",placement:"top"},{default:l(()=>[e(g,{style:{"margin-left":"6px"}},{default:l(()=>[e(v(h))]),_:1})]),_:1})],64)):J("",!0)]),_:2},1024),e(r,{span:2},{default:l(()=>[e(p,{type:"danger",icon:"Delete",onClick:o=>C(B),circle:""},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)),e(f,null,{default:l(()=>[e(p,{type:"primary",onClick:w},{default:l(()=>a[3]||(a[3]=[b("保存规则")])),_:1})]),_:1})]),_:1},8,["model"]),e(D),a[5]||(a[5]=s("div",null,[s("h4",null,"示例说明："),s("ul",null,[s("li",null,"迟到：免扣款3次，超过后每次扣款20元。"),s("li",null,"旷工：按天扣款，公式为：(基本工资+绩效工资)/应出勤天数*旷工天数。"),s("li",null,"自定义异常项：可选择按次或按天扣款，并设置相应金额或公式。")])],-1))]),_:1})])}}},M=I($,[["__scopeId","data-v-0438fa0e"]]);export{M as default};
